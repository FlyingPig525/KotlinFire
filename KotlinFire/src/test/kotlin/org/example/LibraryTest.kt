/*
 * This source file was generated by the Gradle 'init' task
 */
package org.example

import io.github.flyingpig525.base.GlobalActionDump.ACTIONDUMP_URL
import io.github.flyingpig525.base.Template.Type.*
import io.github.flyingpig525.base.TemplateCollection
import io.github.flyingpig525.base.block.PLAYEREVENT
import io.github.flyingpig525.base.item.type.LocItem
import io.github.flyingpig525.base.item.type.MinecraftItem
import io.github.flyingpig525.base.item.type.NumItem.Companion.toNumItem
import io.github.flyingpig525.base.item.type.TextItem.Companion.toTextItem
import io.github.flyingpig525.base.item.type.VarItem.Scope.*
import io.github.flyingpig525.base.item.type.VarItem.Companion.toVarItem
import io.ktor.client.*
import io.ktor.client.call.*
import io.ktor.client.engine.java.*
import io.ktor.client.request.*
import io.ktor.http.*
import kotlinx.coroutines.runBlocking
import kotlinx.serialization.json.Json
import kotlinx.serialization.json.jsonArray
import kotlinx.serialization.json.jsonObject
import kotlinx.serialization.json.jsonPrimitive
import kotlin.test.Test
class LibraryTest {

//    @Test fun caveGenExample() {
//        TemplateCollection {
//            println(EventTemplate(PLAYEREVENT.Join) {
//                PlayerAction.teleport {
//                    +LocItem(0, 100, 0)
//                }
//                val currentLoc = "loc".toVarItem(LINE)
//                val noise = "noise".toVarItem(LINE)
//                Repeat.grid({
//                    +currentLoc
//                    +LocItem(0, LocItem.groundYLevel, 0)
//                    +LocItem(50, LocItem.groundYLevel + 50, 50)
//                }) {
//                    SetVariable.perlinNoise {
//                        +noise
//                        +currentLoc
//                    }
//                    IfVar.chain {
//                        val a = listOf("oak_wood", "dark_oak_wood", "birch_wood", "air", "air")
//                        for (i in 5 downTo 1) {
//                            greaterThan({
//                                +noise
//                                +((i.toFloat().div(7.5)).toNumItem())
//                            }) {
//                                GameAction.setBlock {
//                                    +MinecraftItem.mcItemOf("minecraft:${a[5 - i]}")
//                                    +currentLoc
//                                }
//                                Control.skip()
//                            }
//                        }
//
//                    }
//
//                }
//            }.getJsonData())
//            // Uncomment this when trying out this example
//             codeClientPlaceTemplates()
//
//        }
//    }

//    @Test fun clickerExample() {
//        TemplateCollection {
//            val playerMoney = "%uuid money".toVarItem(SAVE)
//
//            val actionBarLoop = Template(PROCESS, "actionBarLoop") {
//                Repeat.forever {
//                    PlayerAction.actionBar {
//                        +"<green>Money: $playerMoney".toTextItem()
//                    }
//                }
//            }
//
//            EventTemplate(PLAYEREVENT.Join) {
//                IfVar.varExists(
//                    {
//                        +"%uuid".toVarItem(SAVE)
//                    },
//                    true
//                ) {
//                    SetVariable.chain {
//                        set {
//                            +"%uuid".toVarItem(SAVE)
//                            +(1.toNumItem())
//                        }
//                        set {
//                            +playerMoney
//                            +(0.toNumItem())
//                        }
//                    }
//                }
//                SetVariable.setItemName {
//                    +"item".toVarItem(LINE)
//                    +MinecraftItem.mcItemOf("minecraft:redstone")
//                    +"<gradient:#7f52ff:#e3455d>Clicker".toTextItem()
//                }
//                PlayerAction.giveItems {
//                    +"item".toVarItem(LINE)
//                }
//
//                invokeTemplate(actionBarLoop)
//            }
//
//            EventTemplate(PLAYEREVENT.RightClick) {
//                SetVariable.increment {
//                    +playerMoney
//                }
//                PlayerAction.sendMessage {
//                    +"<gradient:#7f52ff:#e3455d>$playerMoney".toTextItem()
//                }
//            }
//            // Uncomment this when trying out this example
//            // codeClientPlaceTemplates()
//        }
//    }
//
//    @Test fun helloWorldExample() {
//        TemplateCollection {
//            EventTemplate(PLAYEREVENT.Join) {
//                PlayerAction.sendMessage {
//                    +"<gradient:#7f52ff:#e3455d>Hello KotlinFire World!".toTextItem()
//                }
//            }
//            // Uncomment this when trying out this example
//            // codeClientPlaceTemplates()
//        }
//    }
}
